<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <!--<title>Dark mode implementation for this blog &#8211; </title>--> <link rel="dns-prefetch" href="//maxcdn.bootstrapcdn.com"> <link rel="dns-prefetch" href="//cdnjs.cloudflare.com"> <meta name="viewport" content="width=device-width, initial-scale=1"> <!--<meta name="description" content="Thoughts on life improvement">--> <meta name="robots" content="all"> <meta name="author" content="Andrey Lepekhin"> <meta name="keywords" content="blog"> <!--<link rel="canonical" href="https://www.lepekhin.com/2022/02/06/Dark-mode-implementation-for-this-blog">--> <link rel="alternate" type="application/rss+xml" title="RSS Feed for " href="/feed.xml" /> <!-- Custom CSS --> <link rel="stylesheet" href="/css/pixyll.css?202207091531" type="text/css"> <!-- Fonts --> <!--<link href='//fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic' rel='stylesheet' type='text/css'>--> <!--<link href='//fonts.googleapis.com/css?family=Lato:900,300' rel='stylesheet' type='text/css'>--> <!--<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script> <script> WebFont.load({ google: { families: ['Merriweather:900,900:italic,300,300:italic', 'Lato:900,300'] } }); </script> --> <!-- MathJax --> <!-- Verifications --> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Dark mode implementation for this blog | The Blog of Andrey Lepekhin</title> <meta name="generator" content="Jekyll v3.8.7" /> <meta property="og:title" content="Dark mode implementation for this blog" /> <meta name="author" content="Andrey Lepekhin" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="I’ve implemented the dark theme for this blog. An endeavour for 2-3 hours that has visible results. A satisfying project, I invite everyone with a light-theme-only blog to try." /> <meta property="og:description" content="I’ve implemented the dark theme for this blog. An endeavour for 2-3 hours that has visible results. A satisfying project, I invite everyone with a light-theme-only blog to try." /> <link rel="canonical" href="https://www.lepekhin.com/2022/02/06/Dark-mode-implementation-for-this-blog" /> <meta property="og:url" content="https://www.lepekhin.com/2022/02/06/Dark-mode-implementation-for-this-blog" /> <meta property="og:site_name" content="The Blog of Andrey Lepekhin" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2022-02-06T00:00:00+03:00" /> <script type="application/ld+json"> {"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.lepekhin.com/2022/02/06/Dark-mode-implementation-for-this-blog"},"datePublished":"2022-02-06T00:00:00+03:00","url":"https://www.lepekhin.com/2022/02/06/Dark-mode-implementation-for-this-blog","author":{"@type":"Person","name":"Andrey Lepekhin"},"headline":"Dark mode implementation for this blog","dateModified":"2022-02-06T00:00:00+03:00","description":"I’ve implemented the dark theme for this blog. An endeavour for 2-3 hours that has visible results. A satisfying project, I invite everyone with a light-theme-only blog to try.","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> <!-- Twitter Card --> <meta name="twitter:card" content="summary" /> <meta name="twitter:title" content="Dark mode implementation for this blog" /> <meta name="twitter:description" content="I’ve implemented the dark theme for this blog. An endeavour for 2-3 hours that has visible results. A satisfying project, I invite everyone with a light-theme-only blog to try. " /> <meta name="twitter:url" content="https://www.lepekhin.com/2022/02/06/Dark-mode-implementation-for-this-blog" /> <!-- Icons --> <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=47BwG2e8GN"> <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=47BwG2e8GN"> <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=47BwG2e8GN"> <link rel="manifest" href="/site.webmanifest?v=47BwG2e8GN"> <link rel="mask-icon" href="/safari-pinned-tab.svg?v=47BwG2e8GN" color="#5bbad5"> <link rel="shortcut icon" href="/favicon.ico?v=47BwG2e8GN"> <meta name="msapplication-TileColor" content="#2b5797"> <meta name="theme-color" content="#ffffff"> <script type="text/javascript"> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-39987270-2', 'auto'); ga('send', 'pageview'); </script> </head> <body class="site"> <div class="site-wrap"> <header class="site-header px2 px-responsive"> <div class="mt2 wrap"> <div class="measure"> <div class="site-nav site-index"><a href="https://www.lepekhin.com">Index</a></div> <nav class="site-nav"> <a href="/about">About me</a> </nav> <div class="clearfix"></div> </div> </div> </header> <div class="post p2 p-responsive wrap" role="main"> <div class="measure"> <div class="post-header mb2"> <h1>Dark mode implementation for this blog</h1> <span class="post-meta">Feb 6, 2022</span> <span class="post-meta small" title="Post tags" style="float:right; !important; font-style: normal; "><a href="https://www.lepekhin.com/tag/process" style="color: #7a7a7a !important; background-image: none;">process</a> </span> <span class="post-meta small" title="Post categories" style="float:right; !important; font-style: normal; "><a href="https://www.lepekhin.com/category/blog" style="color: #7a7a7a !important; background-image: none;">blog</a>,&nbsp; </span> <br> <span class="post-meta small" title="Estimated read time"> 2 minute read </span> </div> <article class="post-content"> <p>I’ve implemented the dark theme for this blog. An endeavour for 2-3 hours that has visible results. A satisfying project, I invite everyone with a light-theme-only blog to try. <!--excerpt_separator--></p> <p><img src="https://www.lepekhin.com/images/2022-02-06-Dark-mode-implementation-for-this-blog--dark-mode-example-picture.jpg" alt="An article screenshot, one half of which is in light mode and the other half is in dark mode" /></p> <p><em>CSS Tricks</em>, of course, has this topic thoroughly covered in their <a href="https://css-tricks.com/a-complete-guide-to-dark-mode-on-the-web/">Complete Guide to Dark Mode on the Web</a>. I’ll describe what I’ve done in this particular blog and why.</p> <p>I’m using <code class="highlighter-rouge">@media (prefers-color-scheme: dark) { ... }</code> CSS media query which lets me use OS-level user preferences. I chose not to support manual toggling between modes because of two reasons:</p> <ol> <li>Implementation involves JavaScript swapping CSS classes and storing state in Local Storage–a harder effort than I wanted for this quick-win project</li> <li>If a user has strong preferences about the dark mode, I imagine such a user already has a way of controlling the interface. Such as a browser plugin that changes the theme, e.g. <a href="https://darkreader.org/">Dark Reader</a>.</li> </ol> <p>As dark mode gains momentum, I think major browsers will display a toggle between modes (not only in Dev Tools) making the effort of creating this toggle myself moot.</p> <h2 id="implementation">Implementation</h2> <p>This blog uses a modified <a href="https://github.com/johno/pixyll">Pixyll theme</a> that has <strong>32</strong> SASS files that get compiled into one big CSS file.</p> <p><img src="https://www.lepekhin.com/images/2022-02-06-Dark-mode-implementation-for-this-blog--sass-includes-listing.jpg" alt="Part of includes listing @importing separate SASS files for links, code, header, etc" width="350" /></p> <p>This otherwise reasonable divide-and-conquer approach bites me in the ass here, as I needed to insert the media-query block 17 times. For each style, I wanted to look different when dark. Here’s <a href="https://github.com/andrey-lepekhin/andrey-lepekhin.github.io/commit/b54227499b737f5042d151f60c39416e88c9ba4b">the actual commit</a>.</p> <p>I could instead place all dark mode styles in one such file, but then I’ll lose the handy separation these files provide. Also, in the future, if I change a light mode style, the proximity of the corresponding dark mode style will remind me to change it as well. Something I might otherwise forget to do and test for. If there is a better way, please tell me about it.</p> <p>So, that’s basically it: adding media-query styles and selecting particular colors that look good on dark background.</p> <hr /> <p>Oh, while we’re on a technical topic, I want to boast a little. This site got a 100/100 performance score at Google’s <a href="https://pagespeed.web.dev">PageSpeed Insights</a> for desktop and 97 for mobile. I can mostly attribute it to Jekyll itself and a little bit to my tweaks using locally hosted fonts instead of Google Fonts’ CDN. I host this blog on <a href="https://pages.github.com/">GitHub Pages</a> for free, you can use the <a href="https://github.com/barryclark/jekyll-now">same GitHub Pages-friendly process</a> I’m using.</p> </article> </div> </div> </div> <footer class="center"> <div class="measure"> <small> <!--Did <i>you</i> meditate <i>today</i>?--> <a href="https://www.lepekhin.com/feed.xml">RSS</a> </small> </div> </footer> </body> </html>
